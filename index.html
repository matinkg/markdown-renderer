<!DOCTYPE html>
<!--
  Markdown Renderer - A client-side Markdown editor and live preview application
  
  Features:
  - Real-time Markdown rendering with syntax highlighting
  - Multi-file tab system for managing multiple documents
  - Theme switching (light/dark mode)
  - Text direction controls (LTR/RTL)
  - Enhanced code blocks with copy functionality
  - LaTeX math support via KaTeX
  - Responsive design with mobile support
  - Local storage persistence
  
  Author: Matin KG
  Repository: https://github.com/matinkg/markdown-renderer
  License: MIT
-->
<!-- Set initial theme based on preference or system (handled by JS) -->
<html lang="en">

<head>
    <!-- Character encoding and viewport settings -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO and social media meta tags -->
    <meta name="description"
        content="A simple, client-side Markdown editor and live renderer with syntax highlighting, theme switching, enhanced code blocks, and LaTeX math support. Write and preview Markdown easily.">
    <meta name="google-site-verification" content="IpfD0P8v_7fwmmxe8nO-zcNdoJeLPwC-qgYjT0Vq_EQ" />

    <title>Markdown Renderer - Live Editor & Preview</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>

<body>
    <!-- Main application container -->
    <div class="app-container container-fluid my-3">
        <!-- Application header with controls and branding -->
        <header class="app-header d-flex flex-wrap align-items-center gap-3 mb-3">
            <!-- Application title with logo -->
            <div class="app-header-brand d-flex align-items-center gap-2 me-auto">
                <img src="logo.png" alt="Markdown Renderer Logo" class="app-logo" width="32" height="32">
                <h1 class="app-title mb-0">Markdown Renderer</h1>
            </div>

            <div class="header-controls d-flex align-items-center flex-wrap gap-2">
                <!-- Auto-render toggle: Controls automatic rendering of markdown as user types -->
                <div class="control-chip" title="Toggle Auto Rendering">
                    <input type="checkbox" id="autoRenderSwitch" role="switch" checked>
                    <label class="chip-content" for="autoRenderSwitch">
                        <i class="bi bi-lightning-charge"></i>
                        <span class="chip-text">Auto</span>
                    </label>
                </div>

                <!-- Manual render button: Allows manual triggering when auto-render is disabled -->
                <button id="manualRenderButton" class="btn btn-modern control-button" disabled title="Render Markdown Manually">
                    <i class="bi bi-play-fill"></i>
                    <span>Render</span>
                </button>

                <!-- Input panel toggle: Shows/hides the markdown input area -->
                <div class="control-chip" title="Toggle Input Panel">
                    <input type="checkbox" id="toggleInputSwitch" role="switch" checked>
                    <label class="chip-content" for="toggleInputSwitch">
                        <i class="bi bi-layout-text-window"></i>
                        <span class="chip-text">Input</span>
                    </label>
                </div>

                <!-- Full height mode: Makes the app use the entire viewport height -->
                <div class="control-chip icon-only" title="Toggle Full Height Mode">
                    <input type="checkbox" id="fullHeightModeSwitch" role="switch">
                    <label class="chip-content" for="fullHeightModeSwitch">
                        <i class="bi bi-arrows-fullscreen"></i>
                        <span class="chip-text visually-hidden">Full Height</span>
                    </label>
                </div>

                <!-- Theme switcher: Toggles between light and dark modes -->
                <div class="control-chip icon-only" title="Toggle Dark Mode">
                    <input type="checkbox" id="themeSwitch" role="switch">
                    <label class="chip-content" for="themeSwitch">
                        <i class="bi bi-moon-stars-fill"></i>
                        <span class="chip-text visually-hidden">Theme</span>
                    </label>
                </div>

                <!-- GitHub repository link -->
                <a href="https://github.com/matinkg/markdown-renderer" target="_blank" rel="noopener noreferrer"
                    class="btn btn-ghost control-button" title="View on GitHub">
                    <i class="bi bi-github"></i>
                    <span>GitHub</span>
                </a>
            </div>
        </header>

        <!-- Main application layout: Two-column responsive design -->
        <div class="row g-3 preview-container">
            <!-- Left column: Input area with file tabs and markdown editor -->
            <div class="col-lg-6" id="input-column">
                <div class="h-100 d-flex flex-column position-relative">
                    <!-- File tabs system for managing multiple documents -->
                    <div id="file-tabs-container">
                        <div id="file-tabs">
                            <!-- Dynamic tab list populated by JavaScript -->
                            <div class="tab-list">
                            </div>
                            <!-- Add new file/tab button -->
                            <button id="add-tab-btn" title="Add New File">
                                <i class="bi bi-plus"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Markdown editor container with toolbar and textarea -->
                    <div class="markdown-editor-container flex-grow-1 position-relative d-flex flex-column">
                        <!-- Markdown formatting toolbar with common syntax buttons -->
                        <div id="markdown-toolbar" class="panel-header-controls">
                            <!-- Scrollable toolbar for smaller screens -->
                            <div class="toolbar-scrollable d-flex align-items-center">
                                <!-- Text formatting controls: Bold, Italic, Strikethrough -->
                                <div class="btn-group btn-group-sm me-2" role="group" aria-label="Formatting">
                                    <button type="button" class="btn btn-outline-secondary" title="Bold (Ctrl+B)"
                                        data-syntax="bold"><i class="bi bi-type-bold"></i></button>
                                    <button type="button" class="btn btn-outline-secondary" title="Italic (Ctrl+I)"
                                        data-syntax="italic"><i class="bi bi-type-italic"></i></button>
                                    <button type="button" class="btn btn-outline-secondary" title="Strikethrough"
                                        data-syntax="strikethrough"><i class="bi bi-type-strikethrough"></i></button>
                                </div>
                                <!-- Structure and content controls: Links, Code, Lists, Images -->
                                <div class="btn-group btn-group-sm me-2" role="group" aria-label="Structure">
                                    <button type="button" class="btn btn-outline-secondary" title="Link (Ctrl+K)"
                                        data-syntax="link"><i class="bi bi-link-45deg"></i></button>
                                    <button type="button" class="btn btn-outline-secondary" title="Inline Code"
                                        data-syntax="inline-code"><i class="bi bi-code"></i></button>
                                    <button type="button" class="btn btn-outline-secondary" title="Code Block"
                                        data-syntax="code-block"><i class="bi bi-code-slash"></i></button>
                                    <button type="button" class="btn btn-outline-secondary" title="Unordered List"
                                        data-syntax="ul-list"><i class="bi bi-list-ul"></i></button>
                                    <button type="button" class="btn btn-outline-secondary" title="Ordered List"
                                        data-syntax="ol-list"><i class="bi bi-list-ol"></i></button>
                                    <button type="button" class="btn btn-outline-secondary" title="Blockquote"
                                        data-syntax="blockquote"><i class="bi bi-blockquote-left"></i></button>
                                    <button type="button" class="btn btn-outline-secondary" title="Image" data-syntax="image"><i
                                            class="bi bi-image"></i></button>
                                </div>
                                <!-- Heading controls and horizontal rule -->
                                <div class="btn-group btn-group-sm me-2" role="group" aria-label="Headings">
                                    <button type="button" class="btn btn-outline-secondary" title="Heading 1"
                                        data-syntax="h1"><i class="bi bi-type-h1"></i></button>
                                    <button type="button" class="btn btn-outline-secondary" title="Heading 2"
                                        data-syntax="h2"><i class="bi bi-type-h2"></i></button>
                                    <button type="button" class="btn btn-outline-secondary" title="Heading 3"
                                        data-syntax="h3"><i class="bi bi-type-h3"></i></button>
                                    <button type="button" class="btn btn-outline-secondary" title="Horizontal Rule"
                                        data-syntax="hr"><i class="bi bi-hr"></i></button>
                                </div>
                            </div>
                            <!-- Real-time character and word counter -->
                            <div id="input-counts" class="ms-2 small text-muted d-flex gap-2 align-items-center">
                                <span id="char-count" title="Character Count">Chars: 0</span>
                                <span>|</span>
                                <span id="word-count" title="Word Count">Words: 0</span>
                            </div>
                        </div>

                        <!-- Accessibility label for markdown input -->
                        <label for="markdown-input" class="form-label visually-hidden">Markdown Input</label>
                        
                        <!-- Main markdown input textarea container -->
                        <div class="textarea-container flex-grow-1 position-relative">
                            <!-- Main markdown input area with LaTeX math support -->
                            <textarea id="markdown-input" class="form-control h-100" spellcheck="false"
                                placeholder="Enter your Markdown here (supports $inline$ and $$display$$ math)..."></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right column: Output area with rendered markdown -->
            <div class="col-lg-6" id="output-column">
                <div class="h-100 d-flex flex-column">
                    <!-- Output panel header with copy button and direction controls -->
                    <div class="d-flex flex-wrap justify-content-between align-items-center gap-3 mb-2 panel-header-controls"
                        id="direction-controls-container">
                        <!-- Copy output button with styling preservation -->
                        <div class="d-flex align-items-center">
                            <button type="button" class="btn btn-outline-secondary btn-sm" id="copyOutputBtn" title="Copy Output with Styling">
                                <i class="bi bi-clipboard"></i> Copy
                            </button>
                        </div>
                        
                        <!-- Text direction controls for different content types -->
                        <div class="d-flex flex-wrap gap-3">
                            <!-- General text direction control -->
                            <div class="d-flex align-items-center gap-2" title="Set Text Direction">
                                <span class="text-nowrap small text-muted"><i class="bi bi-fonts"></i></span>
                                <div class="btn-group btn-group-sm" role="group" aria-label="Text Direction">
                                    <button type="button" class="btn btn-outline-secondary" id="textDirLtrBtn">LTR</button>
                                    <button type="button" class="btn btn-outline-secondary" id="textDirRtlBtn">RTL</button>
                                </div>
                            </div>
                            <!-- Inline code direction control -->
                            <div class="d-flex align-items-center gap-2" title="Set Inline Code Direction (`code`)">
                                <span class="text-nowrap small text-muted"><i class="bi bi-code"></i></span>
                                <div class="btn-group btn-group-sm" role="group" aria-label="Inline Code Direction">
                                    <button type="button" class="btn btn-outline-secondary"
                                        id="inlineCodeDirLtrBtn">LTR</button>
                                    <button type="button" class="btn btn-outline-secondary"
                                        id="inlineCodeDirRtlBtn">RTL</button>
                                </div>
                            </div>
                            <!-- Code block direction control -->
                            <div class="d-flex align-items-center gap-2" title="Set Code Block Direction (```code```)">
                                <span class="text-nowrap small text-muted"><i class="bi bi-code-slash"></i></span>
                                <div class="btn-group btn-group-sm" role="group" aria-label="Code Block Direction">
                                    <button type="button" class="btn btn-outline-secondary" id="codeDirLtrBtn">LTR</button>
                                    <button type="button" class="btn btn-outline-secondary" id="codeDirRtlBtn">RTL</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Main output area where rendered markdown is displayed -->
                    <div id="markdown-output" class="border p-3 rounded flex-grow-1 overflow-auto"
                        data-text-direction="ltr" data-code-direction="ltr">
                        <!-- Rendered markdown content will be dynamically inserted here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JavaScript for UI components and interactions -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>

    
    <!-- File rename modal dialog -->
    <div class="modal fade" id="renameFileModal" tabindex="-1" aria-labelledby="renameFileModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="renameFileModalLabel">Rename File</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="fileNameInput" class="form-label">File Name</label>
                        <input type="text" class="form-control" id="fileNameInput" placeholder="Enter file name">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="confirmRenameBtn">Rename</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main application script (ES6 module) -->
    <script type="module" src="script.js"></script>
</body>

</html>
